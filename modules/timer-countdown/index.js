(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,n(a.key),a)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(a())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&s(r,n.prototype),r}(t,arguments,r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)},i(t)}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}var o='\n  <style>\n    :host {\n      display: inline-block;\n      line-height: 1;\n\n      --work-sans-fea-tnum: "tnum" on;\n\n      font-feature-settings: var(--work-sans-fea-aalt),\n        var(--work-sans-fea-c2sc), var(--work-sans-fea-calt),\n        var(--work-sans-fea-case), var(--work-sans-fea-dlig),\n        var(--work-sans-fea-dnom), var(--work-sans-fea-frac),\n        var(--work-sans-fea-hist), var(--work-sans-fea-liga),\n        var(--work-sans-fea-lnum), var(--work-sans-fea-locl),\n        var(--work-sans-fea-nalt), var(--work-sans-fea-numr),\n        var(--work-sans-fea-onum), var(--work-sans-fea-ordn),\n        var(--work-sans-fea-ornm), var(--work-sans-fea-pnum),\n        var(--work-sans-fea-rvrn), var(--work-sans-fea-salt),\n        var(--work-sans-fea-sinf), var(--work-sans-fea-smcp),\n        var(--work-sans-fea-ss02), var(--work-sans-fea-ss03),\n        var(--work-sans-fea-ss04), var(--work-sans-fea-ss05),\n        var(--work-sans-fea-subs), var(--work-sans-fea-sups),\n        var(--work-sans-fea-tnum), var(--work-sans-fea-zero),\n        var(--work-sans-fea-cpsp), var(--work-sans-fea-kern);\n    }\n\n    #display {\n      font-weight: bold;\n      text-align: center;\n      cursor: pointer;\n    }\n\n    #display.editable {\n      cursor: text;\n    }\n\n    #time-input {\n      display: none;\n      font-weight: bold;\n      text-align: center;\n      border: 2px solid var(--blue-color);\n      border-radius: 0;\n      padding: 0.2em;\n      font-family: inherit;\n      font-size: inherit;\n      background: white;\n      box-sizing: border-box;\n    }\n\n    #controls {\n      display: flex;\n      gap: 0.1em;\n      align-items: center;\n      justify-content: center;\n    }\n\n    button {\n      background: var(--blue-color);\n      border: none;\n      color: white;\n      padding: 0.25em 0.5em;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 0.25em;\n      font-weight: bold;\n      line-height: 1;\n      transition: background-color 0.2s;\n    }\n\n    button:hover {\n      background: var(--blue-color--dark);\n    }\n\n    .finished {\n      animation: blink 1s infinite;\n    }\n\n    @keyframes blink {\n      0%,\n      50% {\n        color: var(--cyan-color);\n      }\n      51%,\n      100% {\n      }\n    }\n  </style>\n  <div class="timer-countdown">\n    <div id="display">00:00:00</div>\n    <input id="time-input" type="text" />\n    <div id="controls">\n      <button id="reset">'.concat("⏮",'</button>\n      <button id="stop">').concat("⏸",'</button>\n      <button id="start">').concat("⏵","</button>\n    </div>\n  </div>\n"),l=function(n){function i(){var e,n,s,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=this,s=i,s=r(s),e=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(n,a()?Reflect.construct(s,l||[],r(n).constructor):s.apply(n,l))).attachShadow({mode:"open"}),e.shadowRoot.innerHTML=o,e.initialTime=0,e.remainingTime=0,e.startTimestamp=null,e.pausedRemainingTime=null,e.intervalId=null,e.isRunning=!1,e.hasBeenStarted=!1,e.display=e.shadowRoot.getElementById("display"),e.timeInput=e.shadowRoot.getElementById("time-input"),e.startBtn=e.shadowRoot.getElementById("start"),e.stopBtn=e.shadowRoot.getElementById("stop"),e.resetBtn=e.shadowRoot.getElementById("reset"),e.startBtn.addEventListener("click",(function(){return e.start()})),e.stopBtn.addEventListener("click",(function(){return e.pause()})),e.resetBtn.addEventListener("click",(function(){return e.reset()})),e.display.addEventListener("dblclick",(function(){return e.editTime()})),e.init(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(i,n),l=i,m=[{key:"observedAttributes",get:function(){return["time","id"]}}],(u=[{key:"attributeChangedCallback",value:function(t,e,n){"time"===t&&n!==e&&(this.parseTime(n),this.updateDisplay())}},{key:"connectedCallback",value:function(){this.restoreTimerState()}},{key:"init",value:function(){var t=this.getAttribute("time");t&&this.parseTime(t),this.updateDisplay(),this.updateButtons()}},{key:"parseTime",value:function(t){var e=t.split(":").map((function(t){return parseInt(t,10)}));3===e.length?this.initialTime=3600*e[0]+60*e[1]+e[2]:2===e.length?this.initialTime=60*e[0]+e[1]:(console.error("Invalid time format. Use HH:MM:SS or MM:SS"),this.initialTime=0),this.remainingTime=this.initialTime}},{key:"formatTime",value:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),i=t%60;return e>0?"".concat(e.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0")):"".concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}},{key:"updateDisplay",value:function(){this.display.textContent=this.formatTime(Math.max(0,this.remainingTime)),this.display.classList.remove("running","finished"),this.remainingTime<=0?this.display.classList.add("finished"):this.isRunning&&this.display.classList.add("running")}},{key:"updateButtons",value:function(){!this.hasBeenStarted&&this.remainingTime,this.remainingTime<=0?(this.startBtn.style.display="none",this.stopBtn.style.display="none",this.resetBtn.style.display="block",this.display.classList.remove("editable")):this.isRunning?(this.startBtn.style.display="none",this.stopBtn.style.display="block",this.resetBtn.style.display="none",this.display.classList.remove("editable")):this.hasBeenStarted?(this.startBtn.style.display="block",this.stopBtn.style.display="none",this.resetBtn.style.display="block",this.display.classList.remove("editable")):(this.startBtn.style.display="block",this.stopBtn.style.display="none",this.resetBtn.style.display="none",this.display.classList.add("editable"))}},{key:"editTime",value:function(){var t=this;if(!(this.hasBeenStarted||this.isRunning||this.remainingTime<=0)){this.display.style.display="none",this.timeInput.style.display="block",this.timeInput.value=this.formatTime(this.remainingTime),this.timeInput.focus(),this.timeInput.select();var e=function(){var e=t.timeInput.value.trim();e&&t.isValidTimeFormat(e)&&(t.parseTime(e),t.saveCustomTime()),t.timeInput.style.display="none",t.display.style.display="block",t.updateDisplay()};this.timeInput.onblur=null,this.timeInput.onkeydown=null,this.timeInput.onblur=e,this.timeInput.onkeydown=function(n){"Enter"===n.key?(n.preventDefault(),e()):"Escape"===n.key&&(n.preventDefault(),t.timeInput.style.display="none",t.display.style.display="block")}}}},{key:"isValidTimeFormat",value:function(t){return/^(\d{1,2}:)?\d{1,2}:\d{2}$/.test(t)}},{key:"saveCustomTime",value:function(){var t=this.getStorageKey();if(t){var e={customTime:this.initialTime,state:"initial"};localStorage.setItem(t,JSON.stringify(e))}}},{key:"start",value:function(){var t=this;this.remainingTime<=0||(this.isRunning=!0,this.hasBeenStarted=!0,null!==this.pausedRemainingTime?(this.startTimestamp=Date.now()-1e3*(this.initialTime-this.pausedRemainingTime),this.pausedRemainingTime=null):this.startTimestamp=Date.now(),this.saveTimerState(),this.intervalId=setInterval((function(){t.tick()}),100),this.updateButtons(),this.updateDisplay())}},{key:"pause",value:function(){this.isRunning&&(this.isRunning=!1,this.pausedRemainingTime=this.remainingTime,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.saveTimerState(),this.updateButtons(),this.updateDisplay())}},{key:"reset",value:function(){this.isRunning=!1,this.remainingTime=this.initialTime,this.startTimestamp=null,this.pausedRemainingTime=null,this.hasBeenStarted=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.clearTimerState(),this.updateButtons(),this.updateDisplay()}},{key:"tick",value:function(){if(this.isRunning&&this.startTimestamp){var t=Math.floor((Date.now()-this.startTimestamp)/1e3);this.remainingTime=Math.max(0,this.initialTime-t),this.updateDisplay(),this.remainingTime<=0&&(this.pause(),console.log("Timer ".concat(this.getAttribute("id")," finished!")))}}},{key:"getStorageKey",value:function(){var t=this.getAttribute("id")||"default";return"timer_".concat(t)}},{key:"saveTimerState",value:function(){var t=this.getStorageKey();if(t){var e={state:this.isRunning?"start":this.remainingTime<=0?"stop":"pause",start:this.startTimestamp,hasBeenStarted:this.hasBeenStarted,pausedRemainingTime:this.pausedRemainingTime,customTime:this.initialTime};localStorage.setItem(t,JSON.stringify(e))}}},{key:"restoreTimerState",value:function(){var t=this,e=this.getStorageKey();if(e){var n=localStorage.getItem(e);if(n){try{var i=JSON.parse(n);if(i.customTime&&i.customTime!==this.initialTime&&(this.initialTime=i.customTime,this.remainingTime=this.initialTime),this.hasBeenStarted=i.hasBeenStarted||!1,this.pausedRemainingTime=i.pausedRemainingTime||null,"start"===i.state&&i.start){var a=Math.floor((Date.now()-i.start)/1e3);this.remainingTime=Math.max(0,this.initialTime-a),this.remainingTime>0?(this.isRunning=!0,this.startTimestamp=i.start,this.intervalId=setInterval((function(){t.tick()}),100)):(this.remainingTime=0,this.isRunning=!1,this.startTimestamp=null,this.pausedRemainingTime=null,this.saveTimerState())}else"stop"===i.state?(this.remainingTime=0,this.isRunning=!1,this.startTimestamp=null,this.pausedRemainingTime=null):"pause"===i.state&&(this.remainingTime=this.pausedRemainingTime||this.initialTime,this.isRunning=!1,this.startTimestamp=i.start)}catch(t){console.error("Failed to restore timer state:",t),this.clearTimerState()}this.updateDisplay(),this.updateButtons()}}}},{key:"clearTimerState",value:function(){var t=this.getStorageKey();t&&localStorage.removeItem(t)}}])&&e(l.prototype,u),m&&e(l,m),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,u,m}(i(HTMLElement));customElements.define("timer-countdown",l)})();